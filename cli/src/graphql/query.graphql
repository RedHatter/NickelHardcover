query GetUserId {
	me {
		id
	}
}

query SearchBooks($query: String!, $limit: Int!, $page: Int!) {
	search(query: $query, query_type: "Book", per_page: $limit, page: $page) {
		results
	}
}

query GetEdition($isbn: [String!]!, $book_id: Int!, $user_id: Int!) {
	editions(
		where: {
			_or: [
				{ asin: { _in: $isbn } }
				{ isbn_10: { _in: $isbn } }
				{ isbn_13: { _in: $isbn } }
				{ book_id: { _eq: $book_id } }
			]
		}
		limit: 1
	) {
		book {
			id
			pages
			default_ebook_edition {
				id
				pages
			}
			default_cover_edition {
				id
				pages
			}
			editions(
				where: {
					_or: [
						{ asin: { _in: $isbn } }
						{ isbn_10: { _in: $isbn } }
						{ isbn_13: { _in: $isbn } }
					]
				}
				limit: 1
			) {
				id
				pages
			}
			user_books(where: { user_id: { _eq: $user_id } }) {
				id
				status_id
				rating
				review_has_spoilers
				review_slate
				reviewed_at
				sponsored_review
				edition {
					pages
					id
				}
				user_book_reads(
					where: { finished_at: { _is_null: true } }
					order_by: { started_at: desc }
					limit: 1
				) {
					id
					started_at
					edition {
						id
						pages
					}
				}
			}
		}
	}
}
